(this["webpackJsonptravel-coin"]=this["webpackJsonptravel-coin"]||[]).push([[11],{2049:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(1),a=r(17),i=r(5),s=r(6),c=r(11),o=r(12),u=r(16),p=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"authenticateUser",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(){var t,r,a,i,s,c,o,p,h,f;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider&&null!==(t=this.chainConfig)&&void 0!==t&&t.chainId){e.next=2;break}throw u.l.notConnectedError();case 2:if(r=this.chainConfig,a=r.chainNamespace,i=r.chainId,this.status===u.d.CONNECTED){e.next=5;break}throw u.l.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return e.next=7,this.provider.request({method:"eth_accounts"});case 7:if(!((s=e.sent)&&s.length>0)){e.next=26;break}if(!(c=Object(u.q)(s[0],this.name))){e.next=14;break}if(Object(u.n)(c)){e.next=14;break}return e.abrupt("return",{idToken:c});case 14:return o={domain:window.location.origin,uri:window.location.href,address:s[0],chainId:parseInt(i,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},e.next=17,Object(u.u)(o,a);case 17:return p=e.sent,e.next=20,this.provider.request({method:"personal_sign",params:[p,s[0]]});case 20:return h=e.sent,e.next=23,Object(u.w)(a,h,p,this.name,this.sessionTime);case 23:return f=e.sent,Object(u.t)(s[0],this.name,f),e.abrupt("return",{idToken:f});case 26:throw u.l.notConnectedError("Not connected with wallet, Please login/connect first");case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===u.d.CONNECTED){e.next=2;break}throw u.l.disconnectionError("Not connected with wallet");case 2:return e.next=4,this.provider.request({method:"eth_accounts"});case 4:(t=e.sent)&&t.length>0&&Object(u.o)(t[0],this.name);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(u.e)},2113:function(e,t,r){"use strict";r.d(t,"a",(function(){return X})),r.d(t,"b",(function(){return H})),r.d(t,"c",(function(){return W})),r.d(t,"d",(function(){return V})),r.d(t,"e",(function(){return Z}));var n=r(135),a=r.n(n),i=r(30),s=r.n(i),c=r(31),o=r.n(c),u=r(39),p=r.n(u),h=r(50),f=r.n(h),d=r(89),l=r.n(d),v=r(44),b=r.n(v),y=r(20),g=r.n(y),m=r(119),O=r(14),w=r.n(O),j=r(22),k=r.n(j),x=(r(120),r(105)),_=r(274),P=r.n(_),E=r(303),S=r.n(E),I=r(93),C=r.n(I),T=r(223),R=r(238),M=r.n(R),N=r(278),D=r.n(N);r(275);function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}function A(){}var F="ACK";m.Duplex;function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}function L(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout((function(){throw n}))}}function U(e){for(var t=e.length,r=new Array(t),n=0;n<t;n+=1)r[n]=e[n];return r}var H=function(e){f()(r,e);var t=G(r);function r(){return s()(this,r),t.apply(this,arguments)}return o()(r,[{key:"emit",value:function(e){var t="error"===e,r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];if(t){var s;if(a.length>0&&(s=a[0]),s instanceof Error)throw s;var c=new Error("Unhandled error.".concat(s?" (".concat(s.message,")"):""));throw c.context=s,c}var o=r[e];if(void 0===o)return!1;if("function"===typeof o)L(o,this,a);else for(var u=o.length,p=U(o),h=0;h<u;h+=1)L(p[h],this,a);return!0}}]),r}(x.EventEmitter);function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var K=function(e){f()(r,e);var t=B(r);function r(e){var n,a=e.code,i=e.message,c=e.data;if(s()(this,r),!Number.isInteger(a))throw new Error("code must be an integer");if(!i||"string"!==typeof i)throw new Error("message must be string");return n=t.call(this,i),g()(p()(n),"code",void 0),g()(p()(n),"data",void 0),n.code=a,void 0!==c&&(n.data=c),n}return o()(r,[{key:"toString",value:function(){return S()({code:this.code,message:this.message,data:this.data,stack:this.stack})}}]),r}(P()(Error));function V(e){return function(t,r,n,a){var i=e[t.method];return void 0===i?n():"function"===typeof i?i(t,r,n,a):(r.result=i,a())}}function W(e){return function(){var t=w()(k.a.mark((function t(r,n,a,i){var s,c,o,u,p;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=new Promise((function(e){s=e})),o=null,u=!1,p=function(){var e=w()(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=!0,a((function(e){o=e,s()})),e.next=4,c;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.prev=4,t.next=7,e(r,n,p);case 7:if(!u){t.next=13;break}return t.next=10,c;case 10:o(null),t.next=14;break;case 13:i(null);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),o?o(t.t0):i(t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e,r,n,a){return t.apply(this,arguments)}}()}function z(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var X=function(e){f()(r,e);var t=$(r);function r(){var e;return s()(this,r),e=t.call(this),g()(p()(e),"_middleware",void 0),e._middleware=[],e}return o()(r,[{key:"push",value:function(e){this._middleware.push(e)}},{key:"handle",value:function(e,t){if(t&&"function"!==typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}},{key:"asMiddleware",value:function(){var e=this;return function(){var t=w()(k.a.mark((function t(n,a,i,s){var c,o,u,p,h;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r._runAllMiddleware(n,a,e._middleware);case 3:if(c=t.sent,o=C()(c,3),u=o[0],p=o[1],h=o[2],!p){t.next=12;break}return t.next=11,r._runReturnHandlers(h);case 11:return t.abrupt("return",s(u));case 12:return t.abrupt("return",i(function(){var e=w()(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r._runReturnHandlers(h);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",t(e.t0));case 8:return e.abrupt("return",t());case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",s(t.t0));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r,n,a){return t.apply(this,arguments)}}()}},{key:"_handleBatch",value:function(){var e=w()(k.a.mark((function e(t,r){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.map(this._promiseHandle.bind(this)));case 3:if(n=e.sent,!r){e.next=6;break}return e.abrupt("return",r(null,n));case 6:return e.abrupt("return",n);case 9:if(e.prev=9,e.t0=e.catch(0),!r){e.next=13;break}return e.abrupt("return",r(e.t0));case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_promiseHandle",value:function(e){var t=this;return new Promise((function(r){t._handle(e,(function(e,t){r(t)}))}))}},{key:"_handle",value:function(){var e=w()(k.a.mark((function e(t,r){var n,i,s,c,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!Array.isArray(t)&&"object"===a()(t)){e.next=3;break}return n=new K({code:-32603,message:"request must be plain object"}),e.abrupt("return",r(n,{id:void 0,jsonrpc:"2.0",error:n}));case 3:if("string"===typeof t.method){e.next=6;break}return i=new K({code:-32603,message:"method must be string"}),e.abrupt("return",r(i,{id:t.id,jsonrpc:"2.0",error:i}));case 6:return s=Q({},t),c={id:s.id,jsonrpc:s.jsonrpc},o=null,e.prev=9,e.next=12,this._processRequest(s,c);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),o=e.t0;case 17:return o&&(delete c.result,c.error||(c.error=Object(T.serializeError)(o))),e.abrupt("return",r(o,c));case 19:case"end":return e.stop()}}),e,this,[[9,14]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_processRequest",value:function(){var e=w()(k.a.mark((function e(t,n){var a,i,s,c,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._runAllMiddleware(t,n,this._middleware);case 2:return a=e.sent,i=C()(a,3),s=i[0],c=i[1],o=i[2],r._checkForCompletion(t,n,c),e.next=10,r._runReturnHandlers(o);case 10:if(!s){e.next=12;break}throw s;case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"_runAllMiddleware",value:function(){var e=w()(k.a.mark((function e(t,n,a){var i,s,c,o,u,p,h,f;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],s=null,c=!1,o=z(a),e.prev=4,o.s();case 6:if((u=o.n()).done){e.next=18;break}return p=u.value,e.next=10,r._runMiddleware(t,n,p,i);case 10:if(h=e.sent,f=C()(h,2),s=f[0],!(c=f[1])){e.next=16;break}return e.abrupt("break",18);case 16:e.next=6;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),o.e(e.t0);case 23:return e.prev=23,o.f(),e.finish(23);case 26:return e.abrupt("return",[s,c,i.reverse()]);case 27:case"end":return e.stop()}}),e,null,[[4,20,23,26]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_runMiddleware",value:function(e,t,r,n){return new Promise((function(a){var i=function(e){var r=e||t.error;r&&(t.error=Object(T.serializeError)(r)),a([r,!0])};try{r(e,t,(function(e){t.error?i(t.error):(e&&("function"!==typeof e&&i(new K({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),n.push(e)),a([null,!1]))}),i)}catch(s){i(s)}}))}},{key:"_runReturnHandlers",value:function(){var e=w()(k.a.mark((function e(t){var r,n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=z(t),e.prev=1,a=k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,e.next=3,new Promise((function(e,r){t((function(t){return t?r(t):e()}))}));case 3:case"end":return e.stop()}}),e)})),r.s();case 4:if((n=r.n()).done){e.next=8;break}return e.delegateYield(a(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),r.e(e.t1);case 13:return e.prev=13,r.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_checkForCompletion",value:function(e,t,r){if(!("result"in t)&&!("error"in t))throw new K({code:-32603,message:"Response has no error or result for request"});if(!r)throw new K({code:-32603,message:"Nothing ended request"})}}]),r}(H);function Z(e){var t=new X;return e.forEach((function(e){return t.push(e)})),t.asMiddleware()}function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var te=function(e){f()(r,e);var t=ee(r);function r(e){var n,a=e.parent,i=e.name;return s()(this,r),n=t.call(this,{objectMode:!0}),g()(p()(n),"_parent",void 0),g()(p()(n),"_name",void 0),n._parent=a,n._name=i,n}return o()(r,[{key:"_read",value:function(){}},{key:"_write",value:function(e,t,r){this._parent.push({name:this._name,data:e}),r()}}]),r}(m.Duplex);function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var ie=Symbol("IGNORE_SUBSTREAM");m.Duplex},2168:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return x})),r.d(t,"c",(function(){return F})),r.d(t,"d",(function(){return S})),r.d(t,"e",(function(){return R}));r(49);var n=r(336),a=(r(21),r(1)),i=r(17),s=(r(53),r(48),r(5)),c=r(6),o=r(15),u=r(11),p=r(12),h=r(20),f=r.n(h),d=r(2113),l=r(223),v=r(965),b=r.n(v),y=(r(437),r(2021));r(2169),r(2052),r(2170),r(318),r(2051);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){Object(u.a)(r,e);var t=Object(p.a)(r);function r(e){var n;Object(s.a)(this,r);var a=e.config,i=void 0===a?{}:a,c=e.state,u=void 0===c?{}:c;return n=t.call(this),f()(Object(o.a)(n),"defaultConfig",{}),f()(Object(o.a)(n),"defaultState",{}),f()(Object(o.a)(n),"disabled",!1),f()(Object(o.a)(n),"name","BaseController"),f()(Object(o.a)(n),"initialConfig",void 0),f()(Object(o.a)(n),"initialState",void 0),f()(Object(o.a)(n),"internalConfig",n.defaultConfig),f()(Object(o.a)(n),"internalState",n.defaultState),n.initialState=u,n.initialConfig=i,n}return Object(c.a)(r,[{key:"config",get:function(){return this.internalConfig}},{key:"state",get:function(){return this.internalState}},{key:"configure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r)for(var n in this.internalConfig=t?e:Object.assign(this.internalConfig,e),this.internalConfig)"undefined"!==typeof this.internalConfig[n]&&(this[n]=this.internalConfig[n]);else for(var a in e)"undefined"!==typeof this.internalConfig[a]&&(this.internalConfig[a]=e[a],this[a]=e[a])}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.internalState=m(t?{}:m({},this.internalState),e),this.emit("store",this.internalState)}},{key:"initialize",value:function(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}}]),r}(d.b),w=function(){return!0},j=["newListener","removeListener"],k=function(e){return!j.includes(e)};function x(e,t){var r=(t||{}).eventFilter||w;if("string"===typeof r&&"skipInternal"===r&&(r=k),"function"!==typeof r)throw new Error("createEventEmitterProxy - Invalid eventFilter");var n=e,a=function(e){var t=n;n=e,t.eventNames().filter(r).forEach((function(r){(function(e,t){return e.rawListeners(t)})(t,r).forEach((function(t){return e.on(r,t)}))})),t.removeAllListeners()};return new Proxy({},{get:function(e,t){return"setTarget"===t?a:n[t]},set:function(e,t,r){return"setTarget"===t?(a=r,!0):(n[t]=r,!0)}})}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=b()();function S(e){var t=new d.b;return t.sendAsync=function(){var t=Object(i.a)(Object(a.a)().mark((function t(r){var n,i,s,c;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handle(r);case 2:if(!(n=t.sent).error){t.next=6;break}throw c=Object(l.serializeError)(n.error,{fallbackError:{message:(null===(i=n.error)||void 0===i?void 0:i.message)||n.error.toString(),code:(null===(s=n.error)||void 0===s?void 0:s.code)||-32603}}),l.ethErrors.rpc.internal(c);case 6:return t.abrupt("return",n.result);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.send=function(t,r){if("function"!==typeof r)throw new Error('Must provide callback to "send" method.');e.handle(t,r)},e.on&&e.on("notification",(function(e){t.emit("data",null,e)})),t.request=function(){var e=Object(i.a)(Object(a.a)().mark((function e(r){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=P(P({},r),{},{id:E(),jsonrpc:"2.0"}),e.next=3,t.sendAsync(n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}var I="opened_window",C="closed_window";d.b;function T(e,t){if(""!==e&&!/^[0-9a-f]+$/i.test(e))throw new Error("Expected an unprefixed hex string. Received: ".concat(e));if(t<0)throw new Error("Expected a non-negative integer target length. Received: ".concat(t));return String.prototype.padStart.call(e,t,"0")}var R=function(t,r){var n=e.from(t,"hex"),a=Object(y.stripHexPrefix)(r),i=Object(y.ecsign)(e.from(a,"hex"),n);return function(e,t,r){var n=Object(y.fromSigned)(t),a=Object(y.fromSigned)(r),i=Object(y.bufferToInt)(e),s=T(Object(y.toUnsigned)(n).toString("hex"),64),c=T(Object(y.toUnsigned)(a).toString("hex"),64),o=Object(y.stripHexPrefix)(function(e){var t=e.toString(16);return"0x".concat(t)}(i));return Object(y.addHexPrefix)(s.concat(c,o))}(Object(y.intToBuffer)(i.v),i.r,i.s)};Error;var M=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function N(e){switch(e.status){case 405:throw l.ethErrors.rpc.methodNotFound();case 418:throw l.ethErrors.rpc.internal({message:"Request is being rate limited."});case 503:case 504:throw l.ethErrors.rpc.internal({message:"Gateway timeout. The request took too long to process.This can happen when querying over too wide a block range."})}}function D(e){return new Promise((function(t){return setTimeout(t,e)}))}function q(e,t){if(200!==e.status)throw l.ethErrors.rpc.internal({message:"Non-200 status code: '".concat(e.status,"'"),data:t});if(t.error)throw l.ethErrors.rpc.internal({data:t.error});return t.result}function A(e){var t=e.req,r=e.rpcTarget,n=e.originHttpHeaderKey,a=new URL(r),i={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},s=t.origin,c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)};return n&&s&&(c.headers[n]=s),{fetchUrl:a.href,fetchParams:c}}function F(e){var t=e.rpcTarget,r=e.originHttpHeaderKey;return Object(d.c)(function(){var e=Object(i.a)(Object(a.a)().mark((function e(n,i,s){var c,o,u,p,h,f,d,l,v;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=A({req:n,rpcTarget:t,originHttpHeaderKey:r}),o=c.fetchUrl,u=c.fetchParams,p=5,h=1e3,f=0;case 4:if(!(f<p)){e.next=26;break}return e.prev=5,e.next=8,fetch(o,u);case 8:return N(d=e.sent),e.next=12,d.json();case 12:return l=e.sent,v=q(d,l),i.result=v,e.abrupt("return");case 18:e.prev=18,e.t0=e.catch(5),function(){var t=e.t0.toString();if(!M.some((function(e){return t.includes(e)})))throw e.t0}();case 21:return e.next=23,D(h);case 23:f++,e.next=4;break;case 26:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t,r,n){return e.apply(this,arguments)}}())}var G;!function(e){e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.failed="failed",e.finalized="finalized",e.processed="processed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved",e.dropped="dropped",e.expired="expired"}(G||(G={}))}).call(this,r(33).Buffer)},2169:function(e,t,r){var n,a;!function(i,s){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function a(e,t){var r=e[t];if("function"===typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(n){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?i:void 0!==console[n]?a(console,n):void 0!==console.log?a(console,"log"):e)}function c(t,r){for(var a=0;a<n.length;a++){var i=n[a];this[i]=a<t?e:this.methodFactory(i,t,r)}this.log=this.debug}function o(e,r,n){return function(){typeof console!==t&&(c.call(this,r,n),this[e].apply(this,arguments))}}function u(e,t,r){return s(e)||o.apply(this,arguments)}function p(e,r,a){var i,s=this;r=null==r?"WARN":r;var o="loglevel";function p(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&o){try{return void(window.localStorage[o]=r)}catch(a){}try{window.document.cookie=encodeURIComponent(o)+"="+r+";"}catch(a){}}}function h(){var e;if(typeof window!==t&&o){try{e=window.localStorage[o]}catch(a){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(o)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(a){}return void 0===s.levels[e]&&(e=void 0),e}}function f(){if(typeof window!==t&&o){try{return void window.localStorage.removeItem(o)}catch(e){}try{window.document.cookie=encodeURIComponent(o)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}"string"===typeof e?o+=":"+e:"symbol"===typeof e&&(o=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=a||u,s.getLevel=function(){return i},s.setLevel=function(r,n){if("string"===typeof r&&void 0!==s.levels[r.toUpperCase()]&&(r=s.levels[r.toUpperCase()]),!("number"===typeof r&&r>=0&&r<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(i=r,!1!==n&&p(r),c.call(s,r,e),typeof console===t&&r<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){r=e,h()||s.setLevel(e,!1)},s.resetLevel=function(){s.setLevel(r,!1),f()},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var d=h();null==d&&(d=r),s.setLevel(d,!1)}var h=new p,f={};h.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new p(e,h.getLevel(),h.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return h.noConflict=function(){return typeof window!==t&&window.log===h&&(window.log=d),h},h.getLoggers=function(){return f},h.default=h,h},void 0===(a="function"===typeof n?n.call(t,r,t,e):n)||(e.exports=a)}()},2170:function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return _})),r.d(t,"c",(function(){return x})),r.d(t,"d",(function(){return P}));var n=r(1),a=r(17),i=(r(49),r(20)),s=r.n(i),c=r(165),o=r.n(c),u=r(2169);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=r.n(u).a.getLogger("http-helpers");f.setLevel(u.levels.INFO);var d="torus-default",l="",v=null,b=[],y=[];function g(e,t){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(Object(n.a)().mark((function e(t,r){var a,i,s,c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null;try{a=new URL(t)}catch(n){}if(!v||!a||!b.includes(a.origin)&&!y.includes(a.pathname)){e.next=11;break}return i=v.startTransaction({name:t}),s=i.startChild({op:"http"}),e.next=7,fetch(t,r);case 7:return c=e.sent,s.finish(),i.finish(),e.abrupt("return",c);case 11:return e.abrupt("return",fetch(t,r));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){var e={};return d&&(e["x-api-key"]=d),l&&(e["x-embed-host"]=l),e}function w(e){f.info("Response: ".concat(e.status," ").concat(e.statusText)),f.info("Url: ".concat(e.url))}var j=function(e,t){var r=new Promise((function(t,r){var n=setTimeout((function(){clearTimeout(n),r(new Error("Timed out in ".concat(e,"ms")))}),e)}));return Promise.race([t,r])},k=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r,a,i,s,c,u=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},a=u.length>2&&void 0!==u[2]?u[2]:{},i={mode:"cors",headers:{}},a.useAPIKey&&(i.headers=h(h({},i.headers),O())),s=o()(i,r,{method:"GET"}),e.next=7,g(t,s);case 7:if(!(c=e.sent).ok){e.next=10;break}return e.abrupt("return",c.json());case 10:throw w(c),c;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};n.useAPIKey&&(a.headers=h(h({},a.headers),O()));var i=o()(a,r,{method:"POST"});return n.isUrlEncodedData?(i.body=t,"application/json; charset=utf-8"===i.headers["Content-Type"]&&delete i.headers["Content-Type"]):i.body=JSON.stringify(t),j(n.timeout||6e4,g(e,i).then((function(e){if(e.ok)return e.json();throw w(e),e})))},_=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r,a,i,s,c,u,p=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},a=p.length>2&&void 0!==p[2]?p[2]:{},i=p.length>3&&void 0!==p[3]?p[3]:{},s={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}},i.useAPIKey&&(s.headers=h(h({},s.headers),O())),c=o()(s,a,{method:"PATCH"}),i.isUrlEncodedData?(c.body=r,"application/json; charset=utf-8"===c.headers["Content-Type"]&&delete c.headers["Content-Type"]):c.body=JSON.stringify(r),e.next=9,g(t,c);case 9:if(!(u=e.sent).ok){e.next=12;break}return e.abrupt("return",u.json());case 12:throw w(u),u;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r,a,i,s,c,u,p=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},a=p.length>2&&void 0!==p[2]?p[2]:{},i=p.length>3&&void 0!==p[3]?p[3]:{},s={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}},i.useAPIKey&&(s.headers=h(h({},s.headers),O())),c=o()(s,a,{method:"DELETE"}),i.isUrlEncodedData?(c.body=r,"application/json; charset=utf-8"===c.headers["Content-Type"]&&delete c.headers["Content-Type"]):c.body=JSON.stringify(r),e.next=9,g(t,c);case 9:if(!(u=e.sent).ok){e.next=12;break}return e.abrupt("return",u.json());case 12:throw w(u),u;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2250:function(e,t,r){"use strict";(function(e){var n=r(1),a=r(17),i=r(5),s=r(6),c=r(37),o=r(2251),u="undefined"!==typeof e.WebSocket?e.WebSocket:r(966),p=function(){function e(t){var r=this;if(Object(i.a)(this,e),this.opts=t,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=t.protocol,this._version=t.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=t.subscriptions||[],this._netMonitor=t.netMonitor||new o.a,!t.url||"string"!==typeof t.url)throw new Error("Missing or invalid WebSocket url");this._url=t.url,this._netMonitor.on("online",(function(){return r._socketCreate()}))}return Object(s.a)(e,[{key:"readyState",get:function(){return this._socket?this._socket.readyState:-1},set:function(e){}},{key:"connecting",get:function(){return 0===this.readyState},set:function(e){}},{key:"connected",get:function(){return 1===this.readyState},set:function(e){}},{key:"closing",get:function(){return 2===this.readyState},set:function(e){}},{key:"closed",get:function(){return 3===this.readyState},set:function(e){}},{key:"open",value:function(){this._socketCreate()}},{key:"close",value:function(){this._socketClose()}},{key:"send",value:function(e,t,r){if(!t||"string"!==typeof t)throw new Error("Missing or invalid topic field");this._socketSend({topic:t,type:"pub",payload:e,silent:!!r})}},{key:"subscribe",value:function(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}},{key:"on",value:function(e,t){this._events.push({event:e,callback:t})}},{key:"_socketCreate",value:function(){var e=this;if(!this._nextSocket){var t=function(e,t,r){var n,a,i=(e.startsWith("https")?e.replace("https","wss"):e.startsWith("http")?e.replace("http","ws"):e).split("?"),s=Object(c.o)()?{protocol:t,version:r,env:"browser",host:(null===(n=Object(c.l)())||void 0===n?void 0:n.host)||""}:{protocol:t,version:r,env:(null===(a=Object(c.g)())||void 0===a?void 0:a.name)||""},o=Object(c.a)(Object(c.m)(i[1]||""),s);return i[0]+"?"+o}(this._url,this._protocol,this._version);if(this._nextSocket=new u(t),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=function(t){return e._socketReceive(t)},this._nextSocket.onopen=function(){return e._socketOpen()},this._nextSocket.onerror=function(t){return e._socketError(t)},this._nextSocket.onclose=function(){setTimeout((function(){e._nextSocket=null,e._socketCreate()}),1e3)}}}},{key:"_socketOpen",value:function(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}},{key:"_socketClose",value:function(){this._socket&&(this._socket.onclose=function(){},this._socket.close())}},{key:"_socketSend",value:function(e){var t=JSON.stringify(e);this._socket&&1===this._socket.readyState?this._socket.send(t):(this._setToQueue(e),this._socketCreate())}},{key:"_socketReceive",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=JSON.parse(t.data),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return");case 7:this._socketSend({topic:r.topic,type:"ack",payload:"",silent:!0}),this._socket&&1===this._socket.readyState&&(a=this._events.filter((function(e){return"message"===e.event})),a&&a.length&&a.forEach((function(e){return e.callback(r)})));case 9:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_socketError",value:function(e){var t=this._events.filter((function(e){return"error"===e.event}));t&&t.length&&t.forEach((function(t){return t.callback(e)}))}},{key:"_queueSubscriptions",value:function(){var e=this;this._subscriptions.forEach((function(t){return e._queue.push({topic:t,type:"sub",payload:"",silent:!0})})),this._subscriptions=this.opts.subscriptions||[]}},{key:"_setToQueue",value:function(e){this._queue.push(e)}},{key:"_pushQueue",value:function(){var e=this;this._queue.forEach((function(t){return e._socketSend(t)})),this._queue=[]}}]),e}();t.a=p}).call(this,r(51))},2251:function(e,t,r){"use strict";var n=r(5),a=r(6),i=function(){function e(){var t=this;Object(n.a)(this,e),this._eventEmitters=[],"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&(window.addEventListener("online",(function(){return t.trigger("online")})),window.addEventListener("offline",(function(){return t.trigger("offline")})))}return Object(a.a)(e,[{key:"on",value:function(e,t){this._eventEmitters.push({event:e,callback:t})}},{key:"trigger",value:function(e){var t=[];e&&(t=this._eventEmitters.filter((function(t){return t.event===e}))),t.forEach((function(e){e.callback()}))}}]),e}();t.a=i},2252:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return H}));var n=r(5),a=r(6),i=r(15),s=r(53),c=r(48),o=r(11),u=r(12),p=r(1),h=r(17),f=r(20),d=r.n(f),l=r(2168),v=r(2113),b=r(16),y=r(2253),g=r(223),m=r(2114),O=r(2171),w=r(2021),j=r(2170),k=r(382),x=r.n(k),_=r(2173),P=r.n(_),E=r(437),S=r.n(E),I=r(2116),C=r.n(I);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e){return 42===e.length}function N(e){var t=e.getAccounts,r=e.getPrivateKey,n=e.processDecryptMessage,a=e.processEncryptionPublicKey,i=e.processEthSignMessage,s=e.processPersonalMessage,c=e.processTransaction,o=e.processSignTransaction,u=e.processTypedMessage,f=e.processTypedMessageV3,d=e.processTypedMessageV4;if(!t)throw new Error("opts.getAccounts is required");function l(e,t){return b.apply(this,arguments)}function b(){return(b=Object(h.a)(Object(p.a)().mark((function e(r,n){var a,i,s;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"===typeof r&&r.length>0)){e.next=8;break}return e.next=3,t(n);case 3:if(a=e.sent,i=a.map((function(e){return e.toLowerCase()})),s=r.toLowerCase(),!i.includes(s)){e.next=8;break}return e.abrupt("return",s);case 8:throw g.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(h.a)(Object(p.a)().mark((function e(r,n){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:n.result=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(h.a)(Object(p.a)().mark((function e(r,n){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:a=e.sent,n.result=a[0]||null;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(h.a)(Object(p.a)().mark((function e(t,r){var n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0]||{from:""},e.next=5,l(n.from,t);case 5:return n.from=e.sent,e.next=8,c(n,t);case 8:r.result=e.sent;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(h.a)(Object(p.a)().mark((function e(t,r){var n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0]||{from:""},e.next=5,l(n.from,t);case 5:return n.from=e.sent,e.next=8,o(n,t);case 8:r.result=e.sent;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(h.a)(Object(p.a)().mark((function e(t,r){var n,a,s,c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,a=t.params[1],s=t.params[2]||{},c=R(R({},s),{},{from:n,data:a}),e.next=10,i(c,t);case 10:r.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(h.a)(Object(p.a)().mark((function e(t,r){var n,a,i,s;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],e.next=5,l(t.params[1],t);case 5:return a=e.sent,"V1",i=t.params[2]||{},s=R(R({},i),{},{from:a,data:n}),e.next=11,u(s,t,"V1");case 11:r.result=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(h.a)(Object(p.a)().mark((function e(t,r){var n,a,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,a=t.params[1],"V3",i={data:a,from:n,version:"V3"},e.next=10,f(i,t,"V3");case 10:r.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(h.a)(Object(p.a)().mark((function e(t,r){var n,a,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,a=t.params[1],"V4",i={data:a,from:n,version:"V4"},e.next=10,d(i,t,"V4");case 10:r.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(h.a)(Object(p.a)().mark((function e(t,r){var n,a,i,c,o,u;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],a=t.params[1],i=t.params[2]||{},M(n)&&!M(a)?("The eth_personalSign method requires params ordered ","[message, address]. This was previously handled incorrectly, ","and has been corrected automatically. ","Please switch this param order for smooth behavior in the future.",r.warning="The eth_personalSign method requires params ordered [message, address]. This was previously handled incorrectly, and has been corrected automatically. Please switch this param order for smooth behavior in the future.",c=n,o=a):(o=n,c=a),e.next=8,l(c,t);case 8:return c=e.sent,u=R(R({},i),{},{from:c,data:o}),e.next=12,s(u,t);case 12:r.result=e.sent;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(h.a)(Object(p.a)().mark((function e(t,r){var n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,e.next=7,a(n,t);case 7:r.result=e.sent;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(h.a)(Object(p.a)().mark((function e(t,r){var a,i,s,c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:return a=t.params[0],e.next=5,l(t.params[1],t);case 5:i=e.sent,s=t.params[2]||{},c=R(R({},s),{},{from:i,data:a}),r.result=n(c,t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(h.a)(Object(p.a)().mark((function e(t,n){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw g.ethErrors.rpc.methodNotSupported();case 2:n.result=r(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.d)({eth_accounts:Object(v.c)((function(e,t){return y.apply(this,arguments)})),eth_private_key:Object(v.c)((function(e,t){return I.apply(this,arguments)})),eth_coinbase:Object(v.c)((function(e,t){return m.apply(this,arguments)})),eth_sendTransaction:Object(v.c)((function(e,t){return O.apply(this,arguments)})),eth_signTransaction:Object(v.c)((function(e,t){return w.apply(this,arguments)})),eth_sign:Object(v.c)((function(e,t){return j.apply(this,arguments)})),eth_signTypedData:Object(v.c)((function(e,t){return k.apply(this,arguments)})),eth_signTypedData_v3:Object(v.c)((function(e,t){return x.apply(this,arguments)})),eth_signTypedData_v4:Object(v.c)((function(e,t){return _.apply(this,arguments)})),personal_sign:Object(v.c)((function(e,t){return P.apply(this,arguments)})),eth_getEncryptionPublicKey:Object(v.c)((function(e,t){return E.apply(this,arguments)})),eth_decrypt:Object(v.c)((function(e,t){return S.apply(this,arguments)}))})}function D(e){var t=e.getAccounts,r=e.getPrivateKey,n=e.processTransaction,a=e.processSignTransaction,i=e.processEthSignMessage,s=e.processTypedMessage,c=e.processTypedMessageV3,o=e.processTypedMessageV4,u=e.processPersonalMessage,p=e.processEncryptionPublicKey,h=e.processDecryptMessage;return Object(v.e)([Object(v.d)({eth_syncing:!1}),N({getAccounts:t,getPrivateKey:r,processTransaction:n,processEthSignMessage:i,processSignTransaction:a,processTypedMessage:s,processTypedMessageV3:c,processTypedMessageV4:o,processPersonalMessage:u,processEncryptionPublicKey:p,processDecryptMessage:h})])}function q(e){return function(t,r,n,a){return"eth_chainId"===t.method?(r.result=e,a()):n()}}function A(e){return function(t,r,n,a){return"eth_provider_config"===t.method?(r.result=e,a()):n()}}function F(e){var t=e.chainId,r=e.rpcTarget,n=Object(l.c)({rpcTarget:r});return{networkMiddleware:Object(v.e)([q(t),A(e),n]),fetchMiddleware:n}}function G(e){var t=e.connector;return{getPrivateKey:function(){var e=Object(h.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw g.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=Object(h.a)(Object(p.a)().mark((function e(r){var n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.accounts)||!n.length){e.next=3;break}return e.abrupt("return",n);case 3:throw new Error("Failed to get accounts");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processTransaction:function(){var e=Object(h.a)(Object(p.a)().mark((function e(r,n){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendTransaction(r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processSignTransaction:function(){var e=Object(h.a)(Object(p.a)().mark((function e(r,n){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTransaction(r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processEthSignMessage:function(){var e=Object(h.a)(Object(p.a)().mark((function e(r,n){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signMessage([r.from,r.data]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processPersonalMessage:function(){var e=Object(h.a)(Object(p.a)().mark((function e(r,n){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signPersonalMessage([r.data,r.from]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessage:function(){var e=Object(h.a)(Object(p.a)().mark((function e(r,n){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTypedData([r.from,r.data]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessageV3:function(){var e=Object(h.a)(Object(p.a)().mark((function e(r){var n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTypedData([r.from,r.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processTypedMessageV4:function(){var e=Object(h.a)(Object(p.a)().mark((function e(r){var n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTypedData([r.from,r.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processEncryptionPublicKey:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw g.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processDecryptMessage:function(e){throw g.ethErrors.rpc.methodNotSupported()}}}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(e){var a;Object(n.a)(this,r);var s=e.config,c=e.state,o=e.connector;return a=t.call(this,{config:{chainConfig:U(U({},s.chainConfig),{},{chainNamespace:b.g.EIP155}),skipLookupNetwork:!!s.skipLookupNetwork},state:U(U({},c||{}),{},{chainId:"loading",accounts:[]})}),d()(Object(i.a)(a),"connector",null),a.connector=o||null,a}return Object(a.a)(r,[{key:"enable",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw g.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 2:return e.next=4,this.setupProvider(this.connector);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onConnectorStateUpdate(t),e.next=3,this.setupEngine(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n,a,i,s,c,o,u;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.chainId,n=t.addChain,a=void 0===n||n,i=t.lookup,s=void 0===i||i,this.connector){e.next=3;break}throw g.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 3:if(c=this.getChainConfig(r),this.update({chainId:"loading"}),o=c.rpcTarget,u=c.displayName,!a){e.next=15;break}return e.prev=7,e.next=10,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:r,chainName:u,rpcUrls:[o]}]});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),b.s.error(e.t0);case 15:return e.prev=15,e.next=18,this.connector.sendCustomRequest({method:"wallet_switchEthereumChain",params:[{chainId:r}]});case 18:e.next=25;break;case 20:if(e.prev=20,e.t1=e.catch(15),b.s.error(e.t1),"JSON RPC response format is invalid"===e.t1.message){e.next=25;break}throw e.t1;case 25:if(this.configure({chainConfig:c}),!s){e.next=29;break}return e.next=29,this.lookupNetwork(this.connector);case 29:case"end":return e.stop()}}),e,this,[[7,12],[15,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addChain",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var n,a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw b.k.notReady("Wallet adapter is not ready yet");case 2:return n=t.rpcTarget,a=t.displayName,e.prev=3,e.next=6,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:t.chainId,chainName:a,rpcUrls:[n]}]});case 6:Object(s.a)(Object(c.a)(r.prototype),"addChain",this).call(this,t),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),b.s.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.connected){e.next=2;break}throw b.l.notConnectedError("Wallet connect connector is not connected");case 2:if(this.provider){e.next=4;break}throw g.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 4:if(r=this.config.chainConfig.chainId,n=Object(b.r)(t.chainId.toString())?t.chainId:"0x".concat(t.chainId.toString(16)),r===n){e.next=8;break}throw b.k.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(r));case 8:return this.provider.emit("connect",{chainId:r}),this.provider.emit("chainChanged",this.state.chainId),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupEngine",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n,a,i,s,c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=G({connector:t}),this.update({accounts:t.accounts||[]}),n=D(r),a=new v.a,i=F(this.config.chainConfig),s=i.networkMiddleware,a.push(n),a.push(s),c=Object(l.d)(a),this.updateProviderEngineProxy(c),this.config.skipLookupNetwork){e.next=12;break}return e.next=12,this.lookupNetwork(t);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onConnectorStateUpdate",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r=this;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("session_update",function(){var e=Object(h.a)(Object(p.a)().mark((function e(n,a){var i,s,c,o,u,h;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.provider){e.next=2;break}throw b.l.notConnectedError("Wallet connect connector is not connected");case 2:if(!n){e.next=5;break}return r.provider.emit("error",n),e.abrupt("return");case 5:if(i=a.params[0],s=i.accounts,c=i.chainId,o=i.rpcUrl,null!==s&&void 0!==s&&s.length&&r.state.accounts[0]!==s[0]&&(r.update({accounts:s}),r.provider.emit("accountsChanged",s)),u="0x".concat(c.toString(16)),!c||r.state.chainId===u){e.next=13;break}return h=Object(b.p)(b.g.EIP155,c)||{},r.configure({chainConfig:U(U({},h),{},{chainId:u,rpcTarget:o,chainNamespace:b.g.EIP155})}),e.next=13,r.setupEngine(t);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(y.a);d()(H,"getProviderInstance",function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new H({config:{chainConfig:t.chainConfig,skipLookupNetwork:t.skipLookupNetwork}}),e.next=3,r.setupProvider(t.connector);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var B=new S.a("1e18"),K=new S.a("1e9"),V=new S.a("1"),W={hex:function(e){return"string"===typeof e?new S.a(Object(w.stripHexPrefix)(e),16):new S.a(e,16)},dec:function(e){return new S.a(e,10)}},z={WEI:function(e){return e.div(B)},GWEI:function(e){return e.div(K)},ETH:function(e){return e.div(V)}},J={WEI:function(e){return e.times(B).dp(0,S.a.ROUND_HALF_UP)},GWEI:function(e){return e.times(K).dp(9,S.a.ROUND_HALF_UP)},ETH:function(e){return e.times(V).dp(9,S.a.ROUND_HALF_UP)}},Y={hex:function(e){return e.toString(16)},dec:function(e){return new S.a(e).toString(10)}},Q=function(e,t){var r=t.fromNumericBase;return function(e){var t=e.value,r=e.fromNumericBase,n=e.fromDenomination,a=e.toNumericBase,i=e.toDenomination,s=e.numberOfDecimals,c=W[r](t);return n&&(c=z[n](c)),i&&(c=J[i](c)),s&&(c=c.dp(s,S.a.ROUND_HALF_DOWN)),a&&(c=Y[a](c)),c}({fromNumericBase:void 0===r?"hex":r,toNumericBase:t.toNumericBase,fromDenomination:t.fromDenomination,toDenomination:t.toDenomination,numberOfDecimals:t.numberOfDecimals,value:e||"0"})};function $(e){return Q(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})}function X(e){return Q(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e){return X($(e))}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(h.a)(Object(p.a)().mark((function e(t){var r,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)(t);case 2:return r=e.sent,n=ee(ee({},r),{},{estimatedBaseFee:te(r.estimatedBaseFee),low:ee(ee({},r.low),{},{suggestedMaxPriorityFeePerGas:te(r.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:te(r.low.suggestedMaxFeePerGas)}),medium:ee(ee({},r.medium),{},{suggestedMaxPriorityFeePerGas:te(r.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:te(r.medium.suggestedMaxFeePerGas)}),high:ee(ee({},r.high),{},{suggestedMaxPriorityFeePerGas:te(r.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:te(r.high.suggestedMaxFeePerGas)})}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(h.a)(Object(p.a)().mark((function e(t){var r;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)(t,{referrer:t,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors"});case 2:return r=e.sent,e.abrupt("return",{low:r.SafeGasPrice,medium:r.ProposeGasPrice,high:r.FastGasPrice});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=function(e,t){var r;try{x.a.ok(e&&"object"===typeof e,"Params must be an object."),x.a.ok("data"in e,'Params must include a "data" field.'),x.a.ok("from"in e,'Params must include a "from" field.'),x.a.ok("string"===typeof e.from&&Object(w.isValidAddress)(e.from),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.');var n=null,a=null;switch(e.version){case O.SignTypedDataVersion.V1:"string"===typeof e.data?x.a.doesNotThrow((function(){n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,x.a.ok(Array.isArray(n),"params.data must be an array."),x.a.doesNotThrow((function(){Object(O.typedSignatureHash)(n)}),"Signing data must be valid EIP-712 typed data.");break;case O.SignTypedDataVersion.V3:case O.SignTypedDataVersion.V4:"string"===typeof e.data?x.a.doesNotThrow((function(){n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,x.a.ok(n.primaryType in n.types,'Primary type of "'.concat(n.primaryType,'" has no type definition.'));var i=P.a.validate(n,O.TYPED_MESSAGE_SCHEMA.properties);x.a.strictEqual(i.errors.length,0,"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx."),(a=null===(r=n.domain)||void 0===r?void 0:r.chainId)&&(x.a.ok(!Number.isNaN(t),'Cannot sign messages for chainId "'.concat(a,'", because Web3Auth is switching networks.')),"string"===typeof a&&(a=Number.parseInt(a,Object(b.r)(a)?16:10)),x.a.strictEqual(a,t,'Provided chainId "'.concat(a,'" must match the active chainId "').concat(t,'"')));break;default:x.a.fail('Unknown typed data version "'.concat(e.version,'"'))}}catch(s){throw g.ethErrors.rpc.invalidInput({message:null===s||void 0===s?void 0:s.message})}};function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return pe.apply(this,arguments)}function pe(){return(pe=Object(h.a)(Object(p.a)().mark((function t(r,n,a){var i,s,c,o;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.formatTransaction(r);case 2:return i=t.sent,t.next=5,a.getCommonConfiguration();case 5:return s=t.sent,c=m.TransactionFactory.fromTxData(i,{common:s}),o=c.sign(e.from(n,"hex")).serialize(),t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function he(t){var r=t.txFormatter,n=t.privKey,a=t.getProviderEngineProxy;return{getAccounts:function(){var t=Object(h.a)(Object(p.a)().mark((function t(r){return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",["0x".concat(Object(w.privateToAddress)(e.from(n,"hex")).toString("hex"))]);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getPrivateKey:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processTransaction:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t,i){var s,c,o;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a()){e.next=3;break}throw g.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,ue(t,n,r);case 5:return c=e.sent,e.next=8,s.request({method:"eth_sendRawTransaction",params:["0x".concat(c.toString("hex"))]});case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processSignTransaction:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t,i){var s;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a()){e.next=3;break}throw g.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,ue(t,n,r);case 5:return s=e.sent,e.abrupt("return","0x".concat(s.toString("hex")));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processEthSignMessage:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t,r){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(l.e)(n,t.data),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processPersonalMessage:function(){var t=Object(h.a)(Object(p.a)().mark((function t(r,a){var i,s;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.from(n,"hex"),s=Object(O.personalSign)({privateKey:i,data:r.data}),t.abrupt("return",s);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),processTypedMessage:function(){var t=Object(h.a)(Object(p.a)().mark((function t(r,i){var s,c,o,u,h,f,d;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b.s.debug("processTypedMessage",r),s=e.from(n,"hex"),c=a()){t.next=5;break}throw g.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return t.next=7,c.request({method:"eth_chainId"});case 7:return o=t.sent,u=Number.parseInt(o,Object(b.r)(o)?16:10),h=oe(oe({},r),{},{version:O.SignTypedDataVersion.V1}),se(h,u),f="string"===typeof h.data?JSON.parse(h.data):h.data,d=Object(O.signTypedData)({privateKey:s,data:f,version:O.SignTypedDataVersion.V1}),t.abrupt("return",d);case 14:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),processTypedMessageV3:function(){var t=Object(h.a)(Object(p.a)().mark((function t(r,i){var s,c,o,u,h,f;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b.s.debug("processTypedMessageV3",r),s=e.from(n,"hex"),c=a()){t.next=5;break}throw g.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return t.next=7,c.request({method:"eth_chainId"});case 7:return o=t.sent,u=Number.parseInt(o,Object(b.r)(o)?16:10),se(r,u),h="string"===typeof r.data?JSON.parse(r.data):r.data,f=Object(O.signTypedData)({privateKey:s,data:h,version:O.SignTypedDataVersion.V3}),t.abrupt("return",f);case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),processTypedMessageV4:function(){var t=Object(h.a)(Object(p.a)().mark((function t(r,i){var s,c,o,u,h,f;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b.s.debug("processTypedMessageV4",r),s=e.from(n,"hex"),c=a()){t.next=5;break}throw g.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return t.next=7,c.request({method:"eth_chainId"});case 7:return o=t.sent,u=Number.parseInt(o,Object(b.r)(o)?16:10),se(r,u),h="string"===typeof r.data?JSON.parse(r.data):r.data,f=Object(O.signTypedData)({privateKey:s,data:h,version:O.SignTypedDataVersion.V4}),t.abrupt("return",f);case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),processEncryptionPublicKey:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t,r){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.s.info("processEncryptionPublicKey",t),e.abrupt("return",Object(O.getEncryptionPublicKey)(n));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processDecryptMessage:function(t,r){b.s.info("processDecryptMessage",t);var a=Object(w.stripHexPrefix)(t.data),i=e.from(a,"hex");return Object(O.decrypt)({encryptedData:JSON.parse(i.toString("utf8")),privateKey:n})}}}function fe(e){return Object(w.addHexPrefix)(e.toString(16))}function de(e){return w.BN.isBN(e)?e:new w.BN(Object(w.stripHexPrefix)(e),16)}function le(e,t,r){var n=new w.BN(t),a=new w.BN(r);return e.mul(n).div(a)}var ve="0x0",be="0x2",ye="sentEther",ge="contractInteraction",me="contractDeployment",Oe="fee-market",we="legacy",je="eth_gasPrice";function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _e=function(){function e(t){Object(n.a)(this,e);var r=t.getProviderEngineProxy;d()(this,"chainConfig",null),d()(this,"getProviderEngineProxy",void 0),d()(this,"isEIP1559Compatible",!1),this.getProviderEngineProxy=r}return Object(a.a)(e,[{key:"providerProxy",get:function(){return this.getProviderEngineProxy()}},{key:"init",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_provider_config",params:[]});case 2:return this.chainConfig=e.sent,e.next=5,this.getEIP1559Compatibility();case 5:this.isEIP1559Compatible=e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCommonConfiguration",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(){var t,r,n,a,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:return t=this.chainConfig,r=t.displayName,n=t.chainId,a=this.isEIP1559Compatible?I.Hardfork.London:I.Hardfork.Berlin,i={name:r,chainId:"loading"===n?0:Number.parseInt(n,16),networkId:"loading"===n?0:Number.parseInt(n,16),defaultHardfork:a},e.abrupt("return",C.a.custom(i));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatTransaction",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n,a,i,s,c,o;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:if(void 0!==(r=xe({},t)).nonce){e.next=7;break}return e.next=6,this.providerProxy.request({method:"eth_getTransactionCount",params:[t.from,"latest"]});case 6:r.nonce=e.sent;case 7:if(this.isEIP1559Compatible||!r.gasPrice){e.next=19;break}if(r.maxFeePerGas&&delete r.maxFeePerGas,r.maxPriorityFeePerGas&&delete r.maxPriorityFeePerGas,r.gas){e.next=17;break}return e.next=13,this.getDefaultGasLimit(r);case 13:(n=e.sent)&&(r.gasLimit=n),e.next=18;break;case 17:r.gasLimit=r.gas;case 18:return e.abrupt("return",r);case 19:if(r.gas){e.next=26;break}return e.next=22,this.getDefaultGasLimit(r);case 22:(a=e.sent)&&(r.gasLimit=a),e.next=27;break;case 26:r.gasLimit=r.gas;case 27:return e.next=29,this.getDefaultGasFees(r);case 29:return i=e.sent,s=i.gasPrice,c=i.maxFeePerGas,o=i.maxPriorityFeePerGas,this.isEIP1559Compatible?(!r.gasPrice||r.maxFeePerGas||r.maxPriorityFeePerGas?(c&&!r.maxFeePerGas&&(r.maxFeePerGas=c),o&&!r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=o),s&&!r.maxFeePerGas&&(r.maxFeePerGas=s),r.maxFeePerGas&&!r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=r.maxFeePerGas)):(r.maxFeePerGas=r.gasPrice,r.maxPriorityFeePerGas=(u="string"===typeof o?Object(w.stripHexPrefix)(o):o,p="string"===typeof r.gasPrice?Object(w.stripHexPrefix)(r.gasPrice):r.gasPrice,null!==u&&void 0!==u&&null!==p&&void 0!==p&&new E.BigNumber(u,10).lt(p,10)?o:r.gasPrice)),delete r.gasPrice):(delete r.maxPriorityFeePerGas,delete r.maxFeePerGas),!s||r.gasPrice||r.maxPriorityFeePerGas||r.maxFeePerGas||(r.gasPrice=s),r.type=this.isEIP1559Compatible?be:ve,r.chainId=this.chainConfig.chainId,e.abrupt("return",r);case 38:case"end":return e.stop()}var u,p}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchEthGasPriceEstimate",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(){var t;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_gasPrice",params:[]});case 2:return t=e.sent,e.abrupt("return",{gasPrice:X(t).toString()});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEIP1559Compatibility",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(){var t,r;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return t=e.sent,r=t&&void 0!==t.baseFeePerGas,e.abrupt("return",!!r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGasFeeEstimateData",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(){var t,r,n,a,i,s;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:if(t="0x1"===this.chainConfig.chainId,r=Number.parseInt(this.chainConfig.chainId,16),e.prev=4,!this.isEIP1559Compatible){e.next=12;break}return e.next=8,re("https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees".replace("<chain_id>","".concat(r)));case 8:a=e.sent,n={gasFeeEstimates:a,gasEstimateType:Oe},e.next=20;break;case 12:if(!t){e.next=19;break}return e.next=15,ae("https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices".replace("<chain_id>","".concat(r)));case 15:i=e.sent,n={gasFeeEstimates:i,gasEstimateType:we},e.next=20;break;case 19:throw new Error("Main gas fee/price estimation failed. Use fallback");case 20:e.next=34;break;case 22:return e.prev=22,e.t0=e.catch(4),e.prev=24,e.next=27,this.fetchEthGasPriceEstimate();case 27:s=e.sent,n={gasFeeEstimates:s,gasEstimateType:je},e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(24),new Error("Gas fee/price estimation failed. Message: ".concat(e.t1.message));case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,this,[[4,22],[24,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"getDefaultGasFees",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n,a,i,s,c,o,u;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isEIP1559Compatible&&t.gasPrice||this.isEIP1559Compatible&&t.maxFeePerGas&&t.maxPriorityFeePerGas)){e.next=2;break}return e.abrupt("return",{});case 2:return e.prev=2,e.next=5,this.fetchGasFeeEstimateData();case 5:if(r=e.sent,n=r.gasFeeEstimates,a=r.gasEstimateType,!this.isEIP1559Compatible||a!==Oe){e.next=16;break}if(i=n.medium,s=(i=void 0===i?{}:i).suggestedMaxPriorityFeePerGas,c=i.suggestedMaxFeePerGas,!s||!c){e.next=14;break}return e.abrupt("return",{maxFeePerGas:Object(w.addHexPrefix)($(c)),maxPriorityFeePerGas:Object(w.addHexPrefix)($(s))});case 14:e.next=22;break;case 16:if(a!==we){e.next=20;break}return e.abrupt("return",{gasPrice:Object(w.addHexPrefix)($(n.medium))});case 20:if(a!==je){e.next=22;break}return e.abrupt("return",{gasPrice:Object(w.addHexPrefix)($(n.gasPrice))});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),b.s.error(e.t0);case 27:return e.next=29,this.fetchEthGasPriceEstimate();case 29:return o=e.sent,u=o.gasPrice,e.abrupt("return",{gasPrice:Object(w.addHexPrefix)($(u))});case 32:case"end":return e.stop()}}),e,this,[[2,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"estimateTxGas",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(r=xe({},t)).gasPrice,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,e.next=6,this.providerProxy.request({method:"eth_estimateGas",params:[r]});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"analyzeGasUsage",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n,a,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return r=e.sent,n=de(r.gasLimit),a=le(n,19,20),i=fe(a),e.prev=6,e.next=9,this.estimateTxGas(t);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),b.s.warn(e.t0);case 15:return e.abrupt("return",{blockGasLimit:r.gasLimit,estimatedGasHex:i});case 16:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addGasBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5,n=de(e),a=de(t),i=a.muln(.9),s=n.muln(r);return n.gt(i)?fe(n):s.lt(i)?fe(s):fe(i)}},{key:"determineTransactionCategory",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n,a,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,n=t.to,a="",!r||n){e.next=6;break}i=me,e.next=17;break;case 6:return e.prev=6,e.next=9,this.providerProxy.request({method:"eth_getCode",params:[n,"latest"]});case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),b.s.warn(e.t0);case 15:i=!a||"0x"===a||"0x0"===a?ye:ge;case 17:return e.abrupt("return",{transactionCategory:i,code:a});case 18:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultGasLimit",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n,a,i,s,c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.determineTransactionCategory(xe({},t));case 2:if(r=e.sent,n=r.transactionCategory,!t.gas){e.next=6;break}return e.abrupt("return",t.gas);case 6:if(!t.to||n!==ye){e.next=11;break}if(!t.data){e.next=9;break}throw Error("TxGasUtil - Trying to call a function on a non-contract address");case 9:return 21e3,e.abrupt("return",Object(w.addHexPrefix)(21e3.toString(16)));case 11:return e.next=13,this.analyzeGasUsage(t);case 13:return a=e.sent,i=a.blockGasLimit,s=a.estimatedGasHex,c=this.addGasBuffer(Object(w.addHexPrefix)(s),i),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Se=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(e){Object(n.a)(this,r);var a=e.config,i=e.state;return t.call(this,{config:{chainConfig:Ee(Ee({},a.chainConfig),{},{chainNamespace:b.g.EIP155})},state:i})}return Object(a.a)(r,[{key:"enable",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}throw g.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return e.next=4,this.setupProvider(this.state.privateKey);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n,a,i,s,c,o,u;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new _e({getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),n=he({txFormatter:r,privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),a=D(n),i=this.getChainSwitchMiddleware(),s=new v.a,c=F(this.config.chainConfig),o=c.networkMiddleware,s.push(a),s.push(i),s.push(this.getAccountMiddleware()),s.push(o),u=Object(l.d)(s),this.updateProviderEngineProxy(u),e.next=14,r.init();case 14:return e.next=16,this.lookupNetwork();case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw g.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"eth_private_key"});case 4:if(e.sent===t.privateKey){e.next=14;break}return e.next=8,this.setupProvider(t.privateKey);case 8:return e.t0=this._providerEngineProxy,e.next=11,this._providerEngineProxy.request({method:"eth_accounts"});case 11:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.emit.call(e.t0,"accountsChanged",e.t2);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw g.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r=this.getChainConfig(t.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:r}),e.next=7,this._providerEngineProxy.request({method:"eth_private_key"});case 7:return n=e.sent,e.next=10,this.setupProvider(n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=Object(h.a)(Object(p.a)().mark((function e(){var t,r;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw g.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:if(t=this.config.chainConfig.chainId){e.next=5;break}throw g.ethErrors.rpc.invalidParams("chainId is required while lookupNetwork");case 5:return e.next=7,this._providerEngineProxy.request({method:"net_version",params:[]});case 7:if(r=e.sent,parseInt(t,16)===parseInt(r,10)){e.next=10;break}throw g.ethErrors.provider.chainDisconnected("Invalid network, net_version is: ".concat(r));case 10:return this.state.chainId!==t&&(this._providerEngineProxy.emit("chainChanged",t),this._providerEngineProxy.emit("connect",{chainId:t})),this.update({chainId:t}),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainSwitchMiddleware",value:function(){var e=this,t={addChain:function(){var t=Object(h.a)(Object(p.a)().mark((function t(r){var n,a,i,s,c;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.chainId,a=r.chainName,i=r.rpcUrls,s=r.blockExplorerUrls,c=r.nativeCurrency,e.addChain({chainNamespace:"eip155",chainId:n,ticker:(null===c||void 0===c?void 0:c.symbol)||"ETH",tickerName:(null===c||void 0===c?void 0:c.name)||"Ether",displayName:a,rpcTarget:i[0],blockExplorer:(null===s||void 0===s?void 0:s[0])||""});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),switchChain:function(){var t=Object(h.a)(Object(p.a)().mark((function t(r){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.chainId,t.next=3,e.switchChain({chainId:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r=function(e){var t=e.addChain,r=e.switchChain;function n(){return(n=Object(h.a)(Object(p.a)().mark((function e(r,n){var a,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0){e.next=3;break}throw g.ethErrors.rpc.invalidParams("Missing chain params");case 3:if(i.chainId){e.next=5;break}throw g.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(i.rpcUrls&&0!==i.rpcUrls.length){e.next=7;break}throw g.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(i.nativeCurrency){e.next=9;break}throw g.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:return e.next=11,t(i);case 11:n.result=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(h.a)(Object(p.a)().mark((function e(t,n){var a,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=t.params)&&void 0!==a&&a.length?t.params[0]:void 0){e.next=3;break}throw g.ethErrors.rpc.invalidParams("Missing chainId");case 3:return e.next=5,r(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.d)({wallet_addEthereumChain:Object(v.c)((function(e,t){return n.apply(this,arguments)})),wallet_switchEthereumChain:Object(v.c)((function(e,t){return a.apply(this,arguments)}))})}(t);return r}},{key:"getAccountMiddleware",value:function(){var e=this,t={updatePrivatekey:function(){var t=Object(h.a)(Object(p.a)().mark((function t(r){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.privateKey,t.next=3,e.updateAccount({privateKey:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return function(e){var t=e.updatePrivatekey;function r(){return(r=Object(h.a)(Object(p.a)().mark((function e(r,n){var a,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0)&&void 0!==i&&i.privateKey){e.next=3;break}throw g.ethErrors.rpc.invalidParams("Missing privateKey");case 3:return e.next=5,t(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.d)({wallet_updateAccount:Object(v.c)((function(e,t){return r.apply(this,arguments)}))})}(t)}}]),r}(y.a);d()(Se,"getProviderInstance",function(){var e=Object(h.a)(Object(p.a)().mark((function e(t){var r;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Se({config:{chainConfig:t.chainConfig}}),e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}).call(this,r(33).Buffer)},2253:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n=r(1),a=r(17),i=r(21),s=r(5),c=r(6),o=r(15),u=r(11),p=r(12),h=r(53),f=r(48),d=r(20),l=r.n(d),v=r(2168),b=r(16),y=r(223),g=r(2113),m=r(965),O=r.n(m);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(e){Object(u.a)(r,e);var t=Object(p.a)(r);function r(e){var n,a;Object(s.a)(this,r);var c=e.config,u=e.state;if(a=t.call(this,{config:c,state:u}),l()(Object(o.a)(a),"_providerEngineProxy",null),!c.chainConfig)throw b.k.invalidProviderConfigError("Please provide chainConfig");if(!c.chainConfig.chainId)throw b.k.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!c.chainConfig.rpcTarget)throw b.k.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return a.defaultState={chainId:"loading"},a.defaultConfig={chainConfig:c.chainConfig,networks:Object(i.a)({},c.chainConfig.chainId,c.chainConfig)},Object(h.a)((n=Object(o.a)(a),Object(f.a)(r.prototype)),"initialize",n).call(n),a}return Object(c.a)(r,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){if(!e.chainId)throw y.ethErrors.rpc.invalidParams("chainId is required");if(!e.rpcTarget)throw y.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:j(j({},this.config.networks),{},Object(i.a)({},e.chainId,e))})}},{key:"getChainConfig",value:function(e){var t,r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw y.ethErrors.rpc.invalidRequest("Chain ".concat(e," is not supported, please add chainConfig for it"));return r}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=Object(v.b)(e)}}]),r}(v.a),x=function(){function e(){Object(s.a)(this,e),l()(this,"_providerEngineProxy",null)}return Object(c.a)(e,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){throw new Error("Method not implemented.")}},{key:"setupProvider",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r,a,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.getPrivKeyMiddleware(t),(a=new g.a).push(r),i=Object(v.d)(a),this.updateProviderEngineProxy(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=Object(v.b)(e)}},{key:"getPrivKeyMiddleware",value:function(e){var t={getPrivatekey:function(){var t=Object(a.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()};return this.createPrivKeyMiddleware(t)}},{key:"createPrivKeyMiddleware",value:function(e){var t=e.getPrivatekey;function r(){return(r=Object(a.a)(Object(n.a)().mark((function e(r,a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:a.result=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(g.d)({private_key:Object(g.c)((function(e,t){return r.apply(this,arguments)}))})}}]),e}();l()(x,"getProviderInstance",function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new x,e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());O()()},2395:function(e,t,r){"use strict";r.r(t),r.d(t,"WalletConnectV1Adapter",(function(){return W}));var n={};r.r(n),r.d(n,"generateKey",(function(){return T})),r.d(n,"verifyHmac",(function(){return M})),r.d(n,"encrypt",(function(){return D})),r.d(n,"decrypt",(function(){return A}));var a=r(1),i=r(17),s=r(5),c=r(6),o=r(15),u=r(53),p=r(48),h=r(11),f=r(12),d=r(20),l=r.n(d),v=r(49),b=r(37),y=r(2250),g="Session currently connected",m="Session currently disconnected",O="JSON RPC response format is invalid",w="User close QRCode Modal",j=function(){function e(){Object(s.a)(this,e),this._eventEmitters=[]}return Object(c.a)(e,[{key:"subscribe",value:function(e){this._eventEmitters.push(e)}},{key:"unsubscribe",value:function(e){this._eventEmitters=this._eventEmitters.filter((function(t){return t.event!==e}))}},{key:"trigger",value:function(e){var t,r=[];(t=Object(b.q)(e)?e.method:Object(b.s)(e)||Object(b.r)(e)?"response:".concat(e.id):Object(b.p)(e)?e.event:"")&&(r=this._eventEmitters.filter((function(e){return e.event===t}))),r&&r.length||Object(b.u)(t)||Object(b.p)(t)||(r=this._eventEmitters.filter((function(e){return"call_request"===e.event}))),r.forEach((function(t){if(Object(b.r)(e)){var r=new Error(e.error.message);t.callback(r,null)}else t.callback(null,e)}))}}]),e}(),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"walletconnect";Object(s.a)(this,e),this.storageId=t}return Object(c.a)(e,[{key:"getSession",value:function(){var e=null,t=Object(b.k)(this.storageId);return t&&Object(b.w)(t)&&(e=t),e}},{key:"setSession",value:function(e){return Object(b.D)(this.storageId,e),e}},{key:"removeSession",value:function(){Object(b.C)(this.storageId)}}]),e}(),x=k,_="abcdefghijklmnopqrstuvwxyz0123456789".split("").map((function(e){return"https://".concat(e,".bridge.walletconnect.org")}));function P(){return _[Math.floor(Math.random()*_.length)]}var E=function(){function e(t){if(Object(s.a)(this,e),this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new j,this._clientMeta=Object(b.i)()||t.connectorOpts.clientMeta||null,this._cryptoLib=t.cryptoLib,this._sessionStorage=t.sessionStorage||new x(t.connectorOpts.storageId),this._qrcodeModal=t.connectorOpts.qrcodeModal,this._qrcodeModalOptions=t.connectorOpts.qrcodeModalOptions,this._signingMethods=[].concat(Object(v.a)(b.E),Object(v.a)(t.connectorOpts.signingMethods||[])),!t.connectorOpts.bridge&&!t.connectorOpts.uri&&!t.connectorOpts.session)throw new Error("Missing one of the required parameters: bridge / uri / session");var r;t.connectorOpts.bridge&&(this.bridge=function(e){return"walletconnect.org"===function(e){return function(e){var t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0];return(t=t.split(":")[0]).split("?")[0]}(e).split(".").slice(-2).join(".")}(e)}(r=t.connectorOpts.bridge)?P():r),t.connectorOpts.uri&&(this.uri=t.connectorOpts.uri);var n=t.connectorOpts.session||this._getStorageSession();n&&(this.session=n),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=t.transport||new y.a({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),t.connectorOpts.uri&&this._subscribeToSessionRequest(),t.pushServerOpts&&this._registerPushServer(t.pushServerOpts)}return Object(c.a)(e,[{key:"bridge",get:function(){return this._bridge},set:function(e){e&&(this._bridge=e)}},{key:"key",get:function(){return this._key?Object(b.c)(this._key,!0):""},set:function(e){if(e){var t=Object(b.e)(e);this._key=t}}},{key:"clientId",get:function(){var e=this._clientId;return e||(e=this._clientId=Object(b.F)()),this._clientId},set:function(e){e&&(this._clientId=e)}},{key:"peerId",get:function(){return this._peerId},set:function(e){e&&(this._peerId=e)}},{key:"clientMeta",get:function(){var e=this._clientMeta;return e||(e=this._clientMeta=Object(b.i)()),e},set:function(e){}},{key:"peerMeta",get:function(){return this._peerMeta},set:function(e){this._peerMeta=e}},{key:"handshakeTopic",get:function(){return this._handshakeTopic},set:function(e){e&&(this._handshakeTopic=e)}},{key:"handshakeId",get:function(){return this._handshakeId},set:function(e){e&&(this._handshakeId=e)}},{key:"uri",get:function(){return this._formatUri()},set:function(e){if(e){var t=this._parseUri(e),r=t.handshakeTopic,n=t.bridge,a=t.key;this.handshakeTopic=r,this.bridge=n,this.key=a}}},{key:"chainId",get:function(){return this._chainId},set:function(e){this._chainId=e}},{key:"networkId",get:function(){return this._networkId},set:function(e){this._networkId=e}},{key:"accounts",get:function(){return this._accounts},set:function(e){this._accounts=e}},{key:"rpcUrl",get:function(){return this._rpcUrl},set:function(e){this._rpcUrl=e}},{key:"connected",get:function(){return this._connected},set:function(e){}},{key:"pending",get:function(){return!!this._handshakeTopic},set:function(e){}},{key:"session",get:function(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}},set:function(e){e&&(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}},{key:"on",value:function(e,t){var r={event:e,callback:t};this._eventManager.subscribe(r)}},{key:"off",value:function(e){this._eventManager.unsubscribe(e)}},{key:"createInstantRequest",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n,i,s=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._generateKey();case 2:return this._key=e.sent,r=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(t)}]}),this.handshakeId=r.id,this.handshakeTopic=Object(b.F)(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",(function(){throw new Error(w)})),n=function(){s.killSession()},e.prev=9,e.next=12,this._sendCallRequest(r);case 12:return(i=e.sent)&&n(),e.abrupt("return",i);case 17:throw e.prev=17,e.t0=e.catch(9),n(),e.t0;case 21:case"end":return e.stop()}}),e,this,[[9,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._qrcodeModal){e.next=2;break}throw new Error("QRCode Modal not provided");case 2:if(!this.connected){e.next=4;break}return e.abrupt("return",{chainId:this.chainId,accounts:this.accounts});case 4:return e.next=6,this.createSession(t);case 6:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.on("modal_closed",(function(){return n(new Error(w))})),r.on("connect",(function(e,r){if(e)return n(e);t(r.params[0])}));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSession",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._connected){e.next=2;break}throw new Error(g);case 2:if(!this.pending){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this._generateKey();case 6:this._key=e.sent,r=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:t&&t.chainId?t.chainId:null}]}),this.handshakeId=r.id,this.handshakeTopic=Object(b.F)(),this._sendSessionRequest(r,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"approveSession",value:function(e){if(this._connected)throw new Error(g);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";var t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},r={id:this.handshakeId,jsonrpc:"2.0",result:t};this._sendResponse(r),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}},{key:"rejectSession",value:function(e){if(this._connected)throw new Error(g);var t=e&&e.message?e.message:"Session Rejected",r=this._formatResponse({id:this.handshakeId,error:{message:t}});this._sendResponse(r),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession()}},{key:"updateSession",value:function(e){if(!this._connected)throw new Error(m);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";var t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},r=this._formatRequest({method:"wc_sessionUpdate",params:[t]});this._sendSessionRequest(r,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}},{key:"killSession",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?t.message:"Session Disconnected",n={approved:!1,chainId:null,networkId:null,accounts:null},i=this._formatRequest({method:"wc_sessionUpdate",params:[n]}),e.next=5,this._sendRequest(i);case 5:this._handleSessionDisconnect(r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(m);case 2:return r=Object(b.z)(t),n=this._formatRequest({method:"eth_sendTransaction",params:[r]}),e.next=6,this._sendCallRequest(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(m);case 2:return r=Object(b.z)(t),n=this._formatRequest({method:"eth_signTransaction",params:[r]}),e.next=6,this._sendCallRequest(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(m);case 2:return r=this._formatRequest({method:"eth_sign",params:t}),e.next=5,this._sendCallRequest(r);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signPersonalMessage",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(m);case 2:return t=Object(b.y)(t),r=this._formatRequest({method:"personal_sign",params:t}),e.next=6,this._sendCallRequest(r);case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTypedData",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(m);case 2:return r=this._formatRequest({method:"eth_signTypedData",params:t}),e.next=5,this._sendCallRequest(r);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateChain",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error("Session currently disconnected");case 2:return r=this._formatRequest({method:"wallet_updateChain",params:[t]}),e.next=5,this._sendCallRequest(r);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsafeSend",value:function(e,t){var r=this;return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),new Promise((function(t,n){r._subscribeToResponse(e.id,(function(e,r){if(e)n(e);else{if(!r)throw new Error("Missing JSON RPC response");t(r)}}))}))}},{key:"sendCustomRequest",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(m);case 2:e.t0=t.method,e.next="eth_accounts"===e.t0?5:"eth_chainId"===e.t0?6:"eth_sendTransaction"===e.t0||"eth_signTransaction"===e.t0?7:"personal_sign"===e.t0?9:11;break;case 5:return e.abrupt("return",this.accounts);case 6:return e.abrupt("return",Object(b.f)(this.chainId));case 7:return t.params&&(t.params[0]=Object(b.z)(t.params[0])),e.abrupt("break",12);case 9:return t.params&&(t.params=Object(b.y)(t.params)),e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:return n=this._formatRequest(t),e.next=15,this._sendCallRequest(n,r);case 15:return i=e.sent,e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"approveRequest",value:function(e){if(!Object(b.s)(e))throw new Error('JSON-RPC success response must include "result" field');var t=this._formatResponse(e);this._sendResponse(t)}},{key:"rejectRequest",value:function(e){if(!Object(b.r)(e))throw new Error('JSON-RPC error response must include "error" field');var t=this._formatResponse(e);this._sendResponse(t)}},{key:"transportClose",value:function(){this._transport.close()}},{key:"_sendRequest",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i,s,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._formatRequest(t),e.next=3,this._encrypt(n);case 3:i=e.sent,s="undefined"!==typeof(null===r||void 0===r?void 0:r.topic)?r.topic:this.peerId,c=JSON.stringify(i),o="undefined"!==typeof(null===r||void 0===r?void 0:r.forcePushNotification)?!r.forcePushNotification:Object(b.v)(n),this._transport.send(c,s,o);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_sendResponse",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._encrypt(t);case 2:r=e.sent,n=this.peerId,i=JSON.stringify(r),!0,this._transport.send(i,n,true);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_sendSessionRequest",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r,n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._sendRequest(t,n),this._subscribeToSessionResponse(t.id,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_sendCallRequest",value:function(e,t){return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),this._subscribeToCallResponse(e.id)}},{key:"_formatRequest",value:function(e){if("undefined"===typeof e.method)throw new Error('JSON RPC request must have valid "method" value');return{id:"undefined"===typeof e.id?Object(b.B)():e.id,jsonrpc:"2.0",method:e.method,params:"undefined"===typeof e.params?[]:e.params}}},{key:"_formatResponse",value:function(e){if("undefined"===typeof e.id)throw new Error('JSON RPC request must have valid "id" value');var t={id:e.id,jsonrpc:"2.0"};if(Object(b.r)(e)){var r=Object(b.h)(e.error);return Object.assign(Object.assign(Object.assign({},t),e),{error:r})}if(Object(b.s)(e))return Object.assign(Object.assign({},t),e);throw new Error(O)}},{key:"_handleSessionDisconnect",value:function(e){var t=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),Object(b.C)(b.x)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession(),this.transportClose()}},{key:"_handleSessionResponse",value:function(e,t){t&&t.approved?(this._connected?(t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),t.peerId&&!this.peerId&&(this.peerId=t.peerId),t.peerMeta&&!this.peerMeta&&(this.peerMeta=t.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e)}},{key:"_handleIncomingMessages",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if([this.clientId,this.handshakeTopic].includes(t.topic)){e.next=3;break}return e.abrupt("return");case 3:e.prev=3,r=JSON.parse(t.payload),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return");case 10:return e.next=12,this._decrypt(r);case 12:(n=e.sent)&&this._eventManager.trigger(n);case 14:case"end":return e.stop()}}),e,this,[[3,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribeToSessionRequest",value:function(){this._transport.subscribe(this.handshakeTopic)}},{key:"_subscribeToResponse",value:function(e,t){this.on("response:".concat(e),t)}},{key:"_subscribeToSessionResponse",value:function(e,t){var r=this;this._subscribeToResponse(e,(function(e,n){e?r._handleSessionResponse(e.message):Object(b.s)(n)?r._handleSessionResponse(t,n.result):n.error&&n.error.message?r._handleSessionResponse(n.error.message):r._handleSessionResponse(t)}))}},{key:"_subscribeToCallResponse",value:function(e){var t=this;return new Promise((function(r,n){t._subscribeToResponse(e,(function(e,t){e?n(e):Object(b.s)(t)?r(t.result):t.error&&t.error.message?n(t.error):n(new Error(O))}))}))}},{key:"_subscribeToInternalEvents",value:function(){var e=this;this.on("display_uri",(function(){e._qrcodeModal&&e._qrcodeModal.open(e.uri,(function(){e._eventManager.trigger({event:"modal_closed",params:[]})}),e._qrcodeModalOptions)})),this.on("connect",(function(){e._qrcodeModal&&e._qrcodeModal.close()})),this.on("call_request_sent",(function(t,r){var n=r.params[0].request;if(Object(b.t)()&&e._signingMethods.includes(n.method)){var a=Object(b.k)(b.x);a&&(window.location.href=a.href)}})),this.on("wc_sessionRequest",(function(t,r){t&&e._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:t.toString()}]}),e.handshakeId=r.id,e.peerId=r.params[0].peerId,e.peerMeta=r.params[0].peerMeta;var n=Object.assign(Object.assign({},r),{method:"session_request"});e._eventManager.trigger(n)})),this.on("wc_sessionUpdate",(function(t,r){t&&e._handleSessionResponse(t.message),e._handleSessionResponse("Session disconnected",r.params[0])}))}},{key:"_initTransport",value:function(){var e=this;this._transport.on("message",(function(t){return e._handleIncomingMessages(t)})),this._transport.on("open",(function(){return e._eventManager.trigger({event:"transport_open",params:[]})})),this._transport.on("close",(function(){return e._eventManager.trigger({event:"transport_close",params:[]})})),this._transport.on("error",(function(){return e._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})})),this._transport.open()}},{key:"_formatUri",value:function(){var e=this.protocol,t=this.handshakeTopic,r=this.version,n=encodeURIComponent(this.bridge),a=this.key;return"".concat(e,":").concat(t,"@").concat(r,"?bridge=").concat(n,"&key=").concat(a)}},{key:"_parseUri",value:function(e){var t=Object(b.A)(e);if(t.protocol===this.protocol){if(!t.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");var r=t.handshakeTopic;if(!t.bridge)throw Error("Invalid or missing bridge url parameter value");var n=decodeURIComponent(t.bridge);if(!t.key)throw Error("Invalid or missing key parameter value");return{handshakeTopic:r,bridge:n,key:t.key}}throw new Error("URI format is invalid")}},{key:"_generateKey",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cryptoLib){e.next=5;break}return e.next=3,this._cryptoLib.generateKey();case 3:return t=e.sent,e.abrupt("return",t);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_encrypt",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._key,!this._cryptoLib||!r){e.next=6;break}return e.next=4,this._cryptoLib.encrypt(t,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_decrypt",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._key,!this._cryptoLib||!r){e.next=6;break}return e.next=4,this._cryptoLib.decrypt(t,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getStorageSession",value:function(){var e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}},{key:"_setStorageSession",value:function(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}},{key:"_removeStorageSession",value:function(){this._sessionStorage&&this._sessionStorage.removeSession()}},{key:"_manageStorageSession",value:function(){this._connected?this._setStorageSession():this._removeStorageSession()}},{key:"_registerPushServer",value:function(e){if(!e.url||"string"!==typeof e.url)throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||"string"!==typeof e.type)throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||"string"!==typeof e.token)throw Error("Invalid or missing pushServerOpts.token parameter value");var t={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",function(){var r=Object(i.a)(Object(a.a)().mark((function r(n,i){var s,c;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=2;break}throw n;case 2:return e.peerMeta&&(s=i.params[0].peerMeta.name,t.peerName=s),r.prev=3,r.next=6,fetch("".concat(e.url,"/new"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 6:return c=r.sent,r.next=9,c.json();case 9:if(r.sent.success){r.next=12;break}throw Error("Failed to register in Push Server");case 12:r.next=17;break;case 14:throw r.prev=14,r.t0=r.catch(3),Error("Failed to register in Push Server");case 17:case"end":return r.stop()}}),r,null,[[3,14]])})));return function(e,t){return r.apply(this,arguments)}}())}}]),e}(),S=E,I=r(372),C=r(38);function T(e){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(Object(a.a)().mark((function e(t){var r,n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t||256)/8,n=I.randomBytes(r),i=Object(b.d)(C.arrayToBuffer(n)),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i,s,c,o,u,p;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.hexToArray(t.data),i=C.hexToArray(t.iv),s=C.hexToArray(t.hmac),c=C.arrayToHex(s,!1),o=C.concatArrays(n,i),e.next=7,I.hmacSha256Sign(r,o);case 7:if(u=e.sent,p=C.arrayToHex(u,!1),C.removeHexPrefix(c)!==C.removeHexPrefix(p)){e.next=11;break}return e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,r){return q.apply(this,arguments)}function q(){return(q=Object(i.a)(Object(a.a)().mark((function e(t,r,n){var i,s,c,o,u,p,h,f,d,l,v;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=C.bufferToArray(Object(b.b)(r)),e.t0=n,e.t0){e.next=6;break}return e.next=5,T(128);case 5:e.t0=e.sent;case 6:return s=e.t0,c=C.bufferToArray(Object(b.b)(s)),o=C.arrayToHex(c,!1),u=JSON.stringify(t),p=C.utf8ToArray(u),e.next=13,I.aesCbcEncrypt(c,i,p);case 13:return h=e.sent,f=C.arrayToHex(h,!1),d=C.concatArrays(h,c),e.next=18,I.hmacSha256Sign(i,d);case 18:return l=e.sent,v=C.arrayToHex(l,!1),e.abrupt("return",{data:f,hmac:v,iv:o});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return F.apply(this,arguments)}function F(){return(F=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i,s,c,o,u;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=C.bufferToArray(Object(b.b)(r))){e.next=3;break}throw new Error("Missing key: required for decryption");case 3:return e.next=5,M(t,n);case 5:if(e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return i=C.hexToArray(t.data),s=C.hexToArray(t.iv),e.next=12,I.aesCbcDecrypt(s,n,i);case 12:c=e.sent,o=C.arrayToUtf8(c),e.prev=14,u=JSON.parse(o),e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(14),e.abrupt("return",null);case 21:return e.abrupt("return",u);case 22:case"end":return e.stop()}}),e,null,[[14,18]])})))).apply(this,arguments)}var G=function(e){Object(h.a)(r,e);var t=Object(f.a)(r);function r(e,a){return Object(s.a)(this,r),t.call(this,{cryptoLib:n,connectorOpts:e,pushServerOpts:a})}return Object(c.a)(r)}(S),L=r(16),U=r(2049),H=r(2252),B=[{name:"Rainbow",chains:[L.g.EIP155],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}},{name:"MetaMask",chains:[L.g.EIP155],logo:"https://images.web3auth.io/login-metamask.svg",mobile:{native:"metamask:",universal:"https://metamask.app.link"},desktop:{native:"",universal:""}}];function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=function(e){Object(h.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(s.a)(this,r);var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=t.call(this),l()(Object(o.a)(e),"name",L.j.WALLET_CONNECT_V1),l()(Object(o.a)(e),"adapterNamespace",L.c.EIP155),l()(Object(o.a)(e),"currentChainNamespace",L.g.EIP155),l()(Object(o.a)(e),"type",L.a.EXTERNAL),l()(Object(o.a)(e),"adapterOptions",void 0),l()(Object(o.a)(e),"status",L.d.NOT_READY),l()(Object(o.a)(e),"adapterData",{uri:"",extensionAdapters:B}),l()(Object(o.a)(e),"connector",null),l()(Object(o.a)(e),"wcProvider",null),l()(Object(o.a)(e),"rehydrated",!1),e.adapterOptions=V({},n),e.chainConfig=n.chainConfig||null,e.sessionTime=n.sessionTime||86400,e}return Object(c.a)(r,[{key:"connected",get:function(){var e;return!(null===(e=this.connector)||void 0===e||!e.connected)}},{key:"provider",get:function(){var e;return(null===(e=this.wcProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error("Not implemented")}},{key:"init",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(u.a)(Object(p.a)(r.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig||(this.chainConfig=Object(L.p)(L.g.EIP155,1)),this.connector=this.getWalletConnectInstance(),this.wcProvider=new H.a({config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(L.b.READY,L.j.WALLET_CONNECT_V1),this.status=L.d.READY,L.s.debug("initializing wallet connect v1 adapter"),!this.connector.connected){e.next=11;break}return this.rehydrated=!0,e.next=11,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t,n,s=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(u.a)(Object(p.a)(r.prototype),"checkConnectionRequirements",this).call(this),this.connector){e.next=3;break}throw L.k.notReady("Wallet adapter is not ready yet");case 3:if(!this.connected){e.next=7;break}return e.next=6,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 6:return e.abrupt("return",this.provider);case 7:if(this.status===L.d.CONNECTING){e.next=13;break}return null!==(t=this.adapterOptions.adapterSettings)&&void 0!==t&&t.qrcodeModal&&(this.connector=this.getWalletConnectInstance(),this.wcProvider=new H.a({config:{chainConfig:this.chainConfig,skipLookupNetwork:null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.skipNetworkSwitching},connector:this.connector})),e.next=11,this.createNewSession();case 11:this.status=L.d.CONNECTING,this.emit(L.b.CONNECTING,{adapter:L.j.WALLET_CONNECT_V1});case 13:return e.abrupt("return",new Promise((function(e,t){if(!s.connector)return t(L.k.notReady("Wallet adapter is not ready yet"));s.connector.on("modal_closed",Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.status=L.d.READY,s.emit(L.b.READY,L.j.WALLET_CONNECT_V1),e.abrupt("return",t(new Error("User closed modal")));case 3:case"end":return e.stop()}}),e)}))));try{s.connector.on("connect",function(){var t=Object(i.a)(Object(a.a)().mark((function t(r,n){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r&&s.emit(L.b.ERRORED,r),L.s.debug("connected event emitted by web3auth"),t.next=4,s.onConnectHandler(n.params[0]);case 4:return t.abrupt("return",e(s.provider));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}catch(r){L.s.error("Wallet connect v1 adapter error while connecting",r),s.status=L.d.READY,s.rehydrated=!0,s.emit(L.b.ERRORED,r),t(r instanceof L.m?r:L.l.connectionError("Failed to login with wallet connect: ".concat((null===r||void 0===r?void 0:r.message)||"")))}})));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAdapterSettings",value:function(e){this.status!==L.d.READY&&null!==e&&void 0!==e&&e.sessionTime&&(this.sessionTime=e.sessionTime)}},{key:"getUserInfo",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connected){e.next=2;break}throw L.l.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t,n,i=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{cleanup:!1},n=t.cleanup,this.connector&&this.connected){e.next=4;break}throw L.l.notConnectedError("Not connected with wallet");case 4:return e.next=6,Object(u.a)(Object(p.a)(r.prototype),"disconnect",this).call(this);case 6:return e.next=8,this.connector.killSession();case 8:this.rehydrated=!1,n?(this.connector=null,this.status=L.d.NOT_READY,this.wcProvider=null):this.status=L.d.READY,this.emit(L.b.DISCONNECTED);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addChain",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.wcProvider){e.next=3;break}throw L.k.notReady("Wallet adapter is not ready yet");case 3:if(!(n=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.networkSwitchModal)){e.next=7;break}return e.next=7,n.addNetwork({chainConfig:t,appOrigin:window.location.hostname});case 7:return e.next=9,this.wcProvider.addChain(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),L.s.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.wcProvider){e.next=2;break}throw L.k.notReady("Wallet adapter is not ready yet");case 2:if(!(i=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.networkSwitchModal)){e.next=6;break}return e.next=6,i.switchNetwork({currentChainConfig:r,newChainConfig:t,appOrigin:window.location.hostname});case 6:return e.next=8,this.wcProvider.switchChain({chainId:r.chainId,lookup:!1,addChain:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createNewSession",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t,r,n,s,c=this,o=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>0&&void 0!==o[0]?o[0]:{forceNewSession:!1},this.connector){e.next=3;break}throw L.k.notReady("Wallet adapter is not ready yet");case 3:if(!n.forceNewSession||!this.connector.pending){e.next=6;break}return e.next=6,this.connector.killSession();case 6:if(null===(t=this.adapterOptions)||void 0===t||null===(r=t.adapterSettings)||void 0===r||!r.qrcodeModal){e.next=10;break}return e.next=9,this.connector.createSession({chainId:parseInt((null===(s=this.chainConfig)||void 0===s?void 0:s.chainId)||"0x1",16)});case 9:return e.abrupt("return");case 10:return e.abrupt("return",new Promise((function(e,t){var r;if(!c.connector)return t(L.k.notReady("Wallet adapter is not ready yet"));L.s.debug("creating new session for web3auth wallet connect"),c.connector.on("display_uri",function(){var r=Object(i.a)(Object(a.a)().mark((function r(n,i){var s,o;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=3;break}return c.emit(L.b.ERRORED,L.l.connectionError("Failed to display wallet connect qr code")),r.abrupt("return",t(n));case 3:return o=i.params[0],c.updateAdapterData({uri:o,extensionAdapters:B}),null===(s=c.connector)||void 0===s||s.off("display_uri"),r.abrupt("return",e());case 7:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()),c.connector.createSession({chainId:parseInt((null===(r=c.chainConfig)||void 0===r?void 0:r.chainId)||"0x1",16)}).catch((function(e){return L.s.error("error while creating new wallet connect session",e),c.emit(L.b.ERRORED,e),t(e)}))})));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onConnectHandler",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n,i,s,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector&&this.wcProvider){e.next=2;break}throw L.k.notReady("Wallet adapter is not ready yet");case 2:if(this.chainConfig){e.next=4;break}throw L.k.invalidParams("Chain config is not set");case 4:if(r=t.chainId,L.s.debug("connected chainId in hex"),r===parseInt(this.chainConfig.chainId,16)){e.next=27;break}if(c=Object(L.p)(L.g.EIP155,r)||{chainId:"0x".concat(r.toString(16)),displayName:"Unknown Network"},(o=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.qrcodeModal)&&(!o||null!==(i=this.adapterOptions)&&void 0!==i&&null!==(s=i.adapterSettings)&&void 0!==s&&s.skipNetworkSwitching)){e.next=27;break}return e.prev=10,e.next=13,this.addChain(this.chainConfig);case 13:return e.next=15,this.switchChain(c,this.chainConfig);case 15:this.connector=this.getWalletConnectInstance(),e.next=27;break;case 18:return e.prev=18,e.t0=e.catch(10),L.s.error("error while chain switching",e.t0),e.next=23,this.createNewSession({forceNewSession:!0});case 23:return this.emit(L.b.ERRORED,L.k.fromCode(5e3,"Not connected to correct network. Expected: ".concat(this.chainConfig.displayName,", Current: ").concat((null===c||void 0===c?void 0:c.displayName)||r,", Please switch to correct network from wallet"))),this.status=L.d.READY,this.rehydrated=!0,e.abrupt("return");case 27:return e.next=29,this.wcProvider.setupProvider(this.connector);case 29:this.subscribeEvents(this.connector),this.status=L.d.CONNECTED,this.emit(L.b.CONNECTED,{adapter:L.j.WALLET_CONNECT_V1,reconnected:this.rehydrated});case 32:case"end":return e.stop()}}),e,this,[[10,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeEvents",value:function(e){var t=this;e.on("session_update",function(){var e=Object(i.a)(Object(a.a)().mark((function e(r){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&t.emit(L.b.ERRORED,r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"getWalletConnectInstance",value:function(){var e=this.adapterOptions.adapterSettings||{};return e.bridge=e.bridge||"https://bridge.walletconnect.org",new G(e)}}]),r}(U.a)}}]);
//# sourceMappingURL=11.e12e1149.chunk.js.map